/fibonacci

{
  % expect an integer
  dup type "integertype" neq { typecheck } if

  0 1

  % n a b
  {
    % [/n /a /b] {
    %   n 0 eq { a break }
    %   n 1 eq { b break }
    %   n 1 sub b a b add
    % } with

    2 index 0 eq {
      % n a b -> a
      3 -1 roll pop pop break
    } if

    2 index 1 eq { 
      % n a b -> b
      3 -2 roll pop pop break
    } if

    % n a b -> n - 1, b, a + b
    1 index add
    exch
    3 -1 roll 1 sub 3 1 roll
  }
  loop
}

bind def